<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Two-Tower Movie Recommender (TF.js ‚Ä¢ MovieLens 100K)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#0f172a; --card:#111827; --muted:#94a3b8; --text:#e5e7eb; --accent:#60a5fa; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
           background: linear-gradient(180deg, var(--bg), #0b1220 60%); color: var(--text); }
    header { padding: 20px 16px 8px; text-align: center; }
    header h1 { margin: 6px 0 4px; font-weight: 700; letter-spacing: .2px; }
    header p { margin: 0; color: var(--muted); font-size: 14px; }
    main { max-width: 1100px; margin: 18px auto 60px; padding: 0 16px; }
    .toolbar { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    button {
      background: #1f2937; color: #fff; border: 1px solid #334155; padding: 10px 14px; border-radius: 12px;
      cursor: pointer; font-weight: 600; transition: transform .02s ease-in, background .2s;
    }
    button:hover { background: #243244; }
    button:active { transform: translateY(1px); }
    .status { margin-top: 10px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; color: #cbd5e1; }
    .grid { margin-top: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .card { background: var(--card); border: 1px solid #1f2937; border-radius: 16px; padding: 14px; }
    .card h3 { margin: 0 0 10px; font-size: 16px; color: #cbd5e1; }
    canvas { width: 100%; height: 260px; background: #0b1220; border-radius: 12px; border: 1px solid #1f2937; }
    #results { margin-top: 16px; }
    table { width: 100%; border-collapse: collapse; overflow: hidden; border-radius: 12px; }
    th, td { padding: 10px 12px; border-bottom: 1px solid #223049; text-align: left; }
    th { background: #0b1220; color: #cbd5e1; font-weight: 700; }
    tr:hover td { background: rgba(96,165,250,.06); }
    .tips { margin-top: 16px; color: #9ca3af; font-size: 13px; line-height: 1.35; }
    code { background: #0b1220; padding: 2px 6px; border-radius: 6px; border: 1px solid #1f2937; color: #cbd5e1; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <header>
    <h1>Two-Tower Movie Recommender (TensorFlow.js)</h1>
    <p>Pure client-side demo trained in your browser on MovieLens 100K.</p>
  </header>

  <main>
    <div class="toolbar">
      <button id="btnLoad">üì• Load Data</button>
      <button id="btnTrain" disabled>üèãÔ∏è Train</button>
      <button id="btnTest" disabled>üß™ Test</button>

      <span class="status" id="status">Status: waiting‚Ä¶</span>
    </div>

    <div class="grid">
      <div class="card">
        <h3>Training Loss (live)</h3>
        <canvas id="lossCanvas" width="520" height="260"></canvas>
      </div>
      <div class="card">
        <h3>Item Embeddings Projection (PCA, sample)</h3>
        <canvas id="projCanvas" width="520" height="260" title="Scatter of a sample of item embeddings"></canvas>
      </div>
    </div>

    <div id="results" class="card"></div>

    <div class="tips card">
      <h3 style="margin-top:0">Tips</h3>
      <ul style="margin:8px 0 0 18px">
        <li>Put <code>u.data</code> and <code>u.item</code> under <code>/data/</code>. This page will fetch them with relative paths.</li>
        <li>Training 3‚Äì5 epochs with embedding dim 32 and ~80k interactions usually takes 30‚Äì120 seconds depending on your device.</li>
        <li>To host on GitHub Pages: create a repo with this <code>index.html</code>, <code>app.js</code>, <code>two-tower.js</code>, and a <code>data/</code> folder; then enable Pages from the repo settings.</li>
      </ul>
    </div>
  </main>

  <!-- TensorFlow.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.20.0/dist/tf.min.js"></script>

  <!-- App logic and model -->
  <script src="two-tower.js"></script>
  <script src="app.js"></script>
</body>
</html>
